<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialHub - Clean Social Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            background: #0a0a0a;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        }
        
        .post-card {
            transition: all 0.3s ease;
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .post-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: rgba(99, 102, 241, 0.3);
        }
        
        .like-btn.liked {
            color: #ef4444;
        }
        
        .story-ring {
            background: linear-gradient(45deg, #f59e0b, #ef4444, #8b5cf6);
            padding: 2px;
            border-radius: 50%;
        }
        
        .notification-dot {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .online-indicator {
            background: #10b981;
            border: 2px solid #1a1a1a;
        }
        
        .glass-card {
            background: rgba(30, 30, 30, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .typing-indicator {
            display: none;
        }
        
        .typing-indicator.active {
            display: flex;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #6b7280;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        .message-bubble {
            max-width: 70%;
            word-wrap: break-word;
        }
        
        .message-sent {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            margin-left: auto;
        }
        
        .message-received {
            background: rgba(55, 65, 81, 0.8);
        }
        
        .story-viewed {
            opacity: 0.6;
        }
        
        .story-viewed .story-ring {
            background: #374151;
        }
        
        .notification-item {
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            background: rgba(99, 102, 241, 0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .emoji-picker {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 0;
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 16px;
            backdrop-filter: blur(20px);
            z-index: 100;
        }
        
        .emoji-picker.active {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
        }
        
        .emoji {
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.2s;
        }
        
        .emoji:hover {
            background: rgba(99, 102, 241, 0.2);
        }

        .comment-section {
            display: none;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 16px;
            background: rgba(20, 20, 20, 0.5);
        }

        .comment-section.active {
            display: block;
        }

        .comment-item {
            background: rgba(40, 40, 40, 0.6);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 8px;
        }

        .image-preview {
            max-width: 100%;
            max-height: 400px;
            border-radius: 12px;
            margin: 12px 0;
        }

        .file-input {
            display: none;
        }

        .stats-counter {
            transition: all 0.3s ease;
        }

        .stats-counter.updated {
            transform: scale(1.1);
            color: #6366f1;
        }

        .post-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .post-actions button {
            flex: 1;
            padding: 8px 16px;
            border-radius: 8px;
            background: rgba(55, 65, 81, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #9ca3af;
            transition: all 0.2s;
        }

        .post-actions button:hover {
            background: rgba(99, 102, 241, 0.2);
            border-color: rgba(99, 102, 241, 0.3);
            color: #c7d2fe;
        }

        .user-status {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-online {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
        }

        .status-away {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
        }

        .status-offline {
            background: rgba(107, 114, 128, 0.2);
            color: #6b7280;
        }

        .friend-item {
            cursor: pointer;
            transition: all 0.2s;
        }

        .friend-item:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .story-item {
            cursor: pointer;
            transition: all 0.2s;
        }

        .story-item:hover {
            transform: scale(1.05);
        }

        .dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 8px;
            backdrop-filter: blur(20px);
            z-index: 100;
            min-width: 150px;
        }

        .dropdown.active {
            display: block;
        }

        .dropdown-item {
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
            color: #9ca3af;
        }

        .dropdown-item:hover {
            background: rgba(99, 102, 241, 0.2);
            color: #c7d2fe;
        }

        .toast {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            z-index: 1001;
            backdrop-filter: blur(20px);
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            backdrop-filter: blur(20px);
            z-index: 100;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .search-results.active {
            display: block;
        }

        .search-item {
            padding: 12px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .search-item:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        .search-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="glass-card fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">SocialHub</h1>
                    <div class="ml-8 relative">
                        <input type="text" id="searchInput" placeholder="Search friends, posts..." class="w-80 pl-10 pr-4 py-2 bg-gray-800 border border-gray-700 rounded-full focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400">
                        <svg class="w-5 h-5 text-gray-400 absolute left-3 top-2.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        <div id="searchResults" class="search-results"></div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-6">
                    <button id="messagesBtn" class="p-2 text-gray-400 hover:text-indigo-400 relative transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                        <span id="messageCount" class="notification-dot absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-xs hidden"></span>
                    </button>
                    
                    <button id="notificationsBtn" class="p-2 text-gray-400 hover:text-indigo-400 relative transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM9 7H4l5-5v5zm6 10V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2z"></path>
                        </svg>
                        <span id="notificationCount" class="notification-dot absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full text-xs hidden"></span>
                    </button>
                    
                    <div class="flex items-center space-x-3 relative">
                        <img id="userAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='16' fill='%236366f1'/%3E%3Ctext x='16' y='20' text-anchor='middle' fill='white' font-family='Arial' font-size='12' font-weight='bold'%3EYou%3C/text%3E%3C/svg%3E" alt="Profile" class="w-8 h-8 rounded-full">
                        <div>
                            <span id="userName" class="font-medium text-gray-300">You</span>
                            <span class="user-status status-online ml-2">Online</span>
                        </div>
                        <button id="profileDropdown" class="text-gray-400 hover:text-white">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        <div id="profileDropdownMenu" class="dropdown">
                            <div class="dropdown-item" onclick="editProfile()">Edit Profile</div>
                            <div class="dropdown-item" onclick="changeStatus()">Change Status</div>
                            <div class="dropdown-item" onclick="viewSettings()">Settings</div>
                            <div class="dropdown-item text-red-400" onclick="logout()">Logout</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Messages Modal -->
    <div id="messagesModal" class="modal">
        <div class="glass-card rounded-xl p-6 w-96 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Messages</h3>
                <button id="closeMessages" class="text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="messagesList" class="space-y-3"></div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div id="notificationsModal" class="modal">
        <div class="glass-card rounded-xl p-6 w-96 max-h-96 overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Notifications</h3>
                <div class="flex space-x-2">
                    <button id="markAllRead" class="text-sm text-indigo-400 hover:text-indigo-300">Mark all read</button>
                    <button id="closeNotifications" class="text-gray-400 hover:text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="notificationsList" class="space-y-3"></div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chatModal" class="modal">
        <div class="glass-card rounded-xl w-96 h-96 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b border-gray-700">
                <div class="flex items-center space-x-3">
                    <img id="chatAvatar" src="" alt="" class="w-8 h-8 rounded-full">
                    <div>
                        <span id="chatName" class="font-semibold"></span>
                        <div class="text-xs text-gray-400">Online</div>
                    </div>
                </div>
                <button id="closeChat" class="text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="chatMessages" class="flex-1 p-4 overflow-y-auto space-y-3"></div>
            <div class="typing-indicator p-4">
                <div class="flex items-center space-x-2">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <span class="text-sm text-gray-400 ml-2">typing...</span>
                </div>
            </div>
            <div class="p-4 border-t border-gray-700 relative">
                <div class="emoji-picker" id="emojiPicker">
                    <span class="emoji">üòÄ</span><span class="emoji">üòÇ</span><span class="emoji">üòç</span><span class="emoji">ü§î</span>
                    <span class="emoji">üòé</span><span class="emoji">üò¢</span><span class="emoji">üò°</span><span class="emoji">üéâ</span>
                    <span class="emoji">‚ù§Ô∏è</span><span class="emoji">üëç</span><span class="emoji">üëé</span><span class="emoji">üî•</span>
                    <span class="emoji">üíØ</span><span class="emoji">üöÄ</span><span class="emoji">‚≠ê</span><span class="emoji">üí™</span>
                </div>
                <div class="flex items-center space-x-2">
                    <button id="emojiBtn" class="text-gray-400 hover:text-yellow-400">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9 5a9 9 0 1118 0 9 9 0 01-18 0z"></path>
                        </svg>
                    </button>
                    <input type="text" id="chatInput" placeholder="Type a message..." class="flex-1 bg-gray-800 border border-gray-700 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400">
                    <button id="sendMessage" class="bg-indigo-600 text-white p-2 rounded-full hover:bg-indigo-700 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Story Modal -->
    <div id="storyModal" class="modal">
        <div class="glass-card rounded-xl p-6 w-96">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Create Story</h3>
                <button id="closeStory" class="text-gray-400 hover:text-white">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="space-y-4">
                <textarea id="storyText" placeholder="Share what's happening..." rows="4" class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400 resize-none"></textarea>
                <div class="flex justify-between items-center">
                    <label for="storyImage" class="flex items-center space-x-2 text-gray-400 hover:text-indigo-400 transition-colors cursor-pointer">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        <span class="text-sm">Add Photo</span>
                    </label>
                    <input type="file" id="storyImage" accept="image/*" class="file-input">
                    <button id="createStoryBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700 transition-colors">
                        Share Story
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="pt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6 py-6">
            <!-- Left Sidebar -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-xl p-6 mb-6">
                    <div class="text-center">
                        <img id="profileAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Crect width='80' height='80' rx='40' fill='%236366f1'/%3E%3Ctext x='40' y='50' text-anchor='middle' fill='white' font-family='Arial' font-size='24' font-weight='bold'%3EYou%3C/text%3E%3C/svg%3E" alt="Profile" class="w-20 h-20 rounded-full mx-auto mb-4">
                        <h3 id="profileName" class="font-semibold text-white">Your Name</h3>
                        <p class="text-gray-400 text-sm">@username</p>
                        <div class="flex justify-center space-x-4 mt-4 text-sm">
                            <div class="text-center">
                                <div id="friendsCount" class="font-semibold text-white stats-counter">0</div>
                                <div class="text-gray-400">Friends</div>
                            </div>
                            <div class="text-center">
                                <div id="postsCount" class="font-semibold text-white stats-counter">0</div>
                                <div class="text-gray-400">Posts</div>
                            </div>
                            <div class="text-center">
                                <div id="likesCount" class="font-semibold text-white stats-counter">0</div>
                                <div class="text-gray-400">Likes</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="glass-card rounded-xl p-6">
                    <h4 class="font-semibold text-white mb-4">Quick Actions</h4>
                    <div class="space-y-3">
                        <button id="findFriendsBtn" class="w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-800 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <span class="text-gray-300">Find Friends</span>
                        </button>
                        <button id="createGroupBtn" class="w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-800 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <span class="text-gray-300">Create Group</span>
                        </button>
                        <button id="eventsBtn" class="w-full flex items-center space-x-3 p-3 text-left hover:bg-gray-800 rounded-lg transition-colors">
                            <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                            <span class="text-gray-300">Events</span>
                        </button>
                        <button id="clearDataBtn" class="w-full flex items-center space-x-3 p-3 text-left hover:bg-red-800 rounded-lg transition-colors text-red-400">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                            <span>Clear All Data</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Feed -->
            <div class="lg:col-span-2">
                <!-- Stories -->
                <div class="glass-card rounded-xl p-6 mb-6">
                    <h4 class="font-semibold text-white mb-4">Stories</h4>
                    <div id="storiesContainer" class="flex space-x-4 overflow-x-auto pb-2">
                        <div class="flex-shrink-0 text-center cursor-pointer story-item" onclick="openStoryModal()">
                            <div class="story-ring rounded-full bg-gray-700">
                                <div class="w-16 h-16 rounded-full bg-gray-800 flex items-center justify-center">
                                    <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                                    </svg>
                                </div>
                            </div>
                            <p class="text-xs text-gray-400 mt-2">Add Story</p>
                        </div>
                    </div>
                </div>

                <!-- Create Post -->
                <div class="glass-card rounded-xl p-6 mb-6">
                    <div class="flex items-center space-x-4 mb-4">
                        <img id="postCreatorAvatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Crect width='40' height='40' rx='20' fill='%236366f1'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='white' font-family='Arial' font-size='16' font-weight='bold'%3EYou%3C/text%3E%3C/svg%3E" alt="Profile" class="w-10 h-10 rounded-full">
                        <textarea id="postInput" placeholder="What's on your mind?" rows="3" class="flex-1 bg-gray-800 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400 resize-none"></textarea>
                    </div>
                    
                    <div id="imagePreview" class="mb-4 hidden">
                        <img id="previewImg" src="" alt="Preview" class="image-preview">
                        <button id="removeImage" class="mt-2 text-red-400 hover:text-red-300 text-sm">Remove Image</button>
                    </div>
                    
                    <div class="flex items-center justify-between">
                        <div class="flex space-x-4">
                            <label for="imageInput" class="flex items-center space-x-2 text-gray-400 hover:text-indigo-400 transition-colors cursor-pointer">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                </svg>
                                <span class="text-sm">Photo</span>
                            </label>
                            <input type="file" id="imageInput" accept="image/*" class="file-input">
                            
                            <button id="feelingBtn" class="flex items-center space-x-2 text-gray-400 hover:text-indigo-400 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-9 5a9 9 0 1118 0 9 9 0 01-18 0z"></path>
                                </svg>
                                <span class="text-sm">Feeling</span>
                            </button>
                            
                            <button id="locationBtn" class="flex items-center space-x-2 text-gray-400 hover:text-indigo-400 transition-colors">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                </svg>
                                <span class="text-sm">Location</span>
                            </button>
                        </div>
                        <button id="createPostBtn" class="bg-indigo-600 text-white px-6 py-2 rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                            Post
                        </button>
                    </div>
                </div>

                <!-- Posts Container -->
                <div id="postsContainer" class="space-y-6">
                    <div class="text-center text-gray-500 py-12">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                        </svg>
                        <h3 class="text-xl font-semibold mb-2">No posts yet</h3>
                        <p>Share your first post to get started!</p>
                        <p class="text-sm mt-2">Write something in the box above and click "Post"</p>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="lg:col-span-1">
                <!-- Friends -->
                <div class="glass-card rounded-xl p-6 mb-6">
                    <h4 class="font-semibold text-white mb-4">Friends</h4>
                    <div id="onlineFriends" class="space-y-3"></div>
                </div>

                <!-- Trending Topics -->
                <div class="glass-card rounded-xl p-6 mb-6">
                    <h4 class="font-semibold text-white mb-4">Trending Topics</h4>
                    <div id="trendingTopics" class="space-y-3"></div>
                </div>

                <!-- Activity Feed -->
                <div class="glass-card rounded-xl p-6">
                    <h4 class="font-semibold text-white mb-4">Recent Activity</h4>
                    <div id="activityFeed" class="space-y-3"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Complete Social Network Implementation
        class FullySocialHub {
            constructor() {
                this.storageKey = 'socialhub_complete_data';
                this.data = this.loadData();
                this.currentChat = null;
                this.searchTimeout = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateUI();
// No fake friend simulation
                this.startRealTimeUpdates();
            }

            loadData() {
                const stored = localStorage.getItem(this.storageKey);
                if (stored) {
                    return JSON.parse(stored);
                }
                return {
                    posts: [],
                    user: {
                        id: 'user_' + Date.now(),
                        name: 'You',
                        username: 'username',
                        avatar: 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'40\' height=\'40\' viewBox=\'0 0 40 40\'%3E%3Crect width=\'40\' height=\'40\' rx=\'20\' fill=\'%236366f1\'/%3E%3Ctext x=\'20\' y=\'26\' text-anchor=\'middle\' fill=\'white\' font-family=\'Arial\' font-size=\'16\' font-weight=\'bold\'%3EYou%3C/text%3E%3C/svg%3E',
                        joinDate: new Date().toISOString(),
                        status: 'online',
                        stats: {
                            posts: 0,
                            friends: 0,
                            likes: 0
                        }
                    },
                    friends: [], // No fake friends
                    messages: [],
                    conversations: {},
                    notifications: [],
                    stories: [],
                    activities: [],
                    trending: [] // No fake trending topics
                };
            }

            generateFriends() {
                // No fake friends - real social network starts empty
                return [];
            }

            saveData() {
                localStorage.setItem(this.storageKey, JSON.stringify(this.data));
                this.updateUI();
            }

            // Post Management
            addPost(content, image = null, feeling = null, location = null) {
                const post = {
                    id: Date.now(),
                    author: this.data.user.name,
                    authorId: this.data.user.id,
                    authorAvatar: this.data.user.avatar,
                    content: content,
                    image: image,
                    feeling: feeling,
                    location: location,
                    timestamp: new Date().toISOString(),
                    likes: 0,
                    comments: [],
                    shares: 0,
                    likedBy: []
                };

                this.data.posts.unshift(post);
                this.data.user.stats.posts++;
                this.addActivity(`You created a new post`);
                this.updateTrending(content);
                this.saveData();
                return post;
            }

            toggleLike(postId) {
                const post = this.data.posts.find(p => p.id === postId);
                if (post) {
                    const userId = this.data.user.id;
                    const likedIndex = post.likedBy.indexOf(userId);
                    
                    if (likedIndex === -1) {
                        post.likedBy.push(userId);
                        post.likes++;
                        this.data.user.stats.likes++;
                        this.addActivity(`You liked a post`);
                        this.addNotification('like', `You liked your own post`, 'self');
                    } else {
                        post.likedBy.splice(likedIndex, 1);
                        post.likes--;
                        this.data.user.stats.likes--;
                    }
                    
                    this.saveData();
                    return post.likedBy.includes(userId);
                }
                return false;
            }

            addComment(postId, comment) {
                const post = this.data.posts.find(p => p.id === postId);
                if (post) {
                    const newComment = {
                        id: Date.now(),
                        author: this.data.user.name,
                        authorId: this.data.user.id,
                        authorAvatar: this.data.user.avatar,
                        content: comment,
                        timestamp: new Date().toISOString()
                    };
                    
                    post.comments.push(newComment);
                    this.addActivity(`You commented on a post`);
                    this.saveData();
                    return newComment;
                }
                return null;
            }

            sharePost(postId) {
                const post = this.data.posts.find(p => p.id === postId);
                if (post) {
                    post.shares++;
                    this.addActivity(`You shared a post`);
                    this.addNotification('share', `You shared a post`, 'self');
                    this.saveData();
                    return true;
                }
                return false;
            }

            // Story Management
            addStory(content, image = null) {
                const story = {
                    id: Date.now(),
                    author: this.data.user.name,
                    authorId: this.data.user.id,
                    authorAvatar: this.data.user.avatar,
                    content: content,
                    image: image,
                    timestamp: new Date().toISOString(),
                    views: 0,
                    viewedBy: []
                };

                this.data.stories.unshift(story);
                this.addActivity(`You shared a story`);
                this.saveData();
                return story;
            }

            // Messaging System
            sendMessage(friendId, message) {
                const friend = this.data.friends.find(f => f.id === friendId);
                if (!friend) return null;

                const conversationId = [this.data.user.id, friendId].sort().join('_');
                
                if (!this.data.conversations[conversationId]) {
                    this.data.conversations[conversationId] = [];
                }

                const newMessage = {
                    id: Date.now(),
                    senderId: this.data.user.id,
                    receiverId: friendId,
                    content: message,
                    timestamp: new Date().toISOString(),
                    read: false,
                    delivered: false,
                    seen: false
                };

                this.data.conversations[conversationId].push(newMessage);
                this.addActivity(`You sent a message to ${friend.name}`);
                
                // Authentic message delivery - messages to offline friends are delivered but not seen
                setTimeout(() => {
                    newMessage.delivered = true;
                    this.saveData();
                    if (this.currentChat === friendId) {
                        this.renderChatMessages(friendId);
                    }
                    // Offline friends don't see messages - this is authentic
                }, 1000);
                
                // No fake replies - this is authentic single-user behavior

                this.saveData();
                return newMessage;
            }

            simulateFriendReply(conversationId, friend) {
                // Authentic behavior: Offline friends don't reply
                // This is a single-user demo, so friends are offline and don't respond
                // Messages will show as delivered but not seen, which is authentic
                return;
            }

            getConversation(friendId) {
                const conversationId = [this.data.user.id, friendId].sort().join('_');
                return this.data.conversations[conversationId] || [];
            }

            // Notification System
            addNotification(type, message, from = 'system') {
                const notification = {
                    id: Date.now(),
                    type: type,
                    message: message,
                    from: from,
                    timestamp: new Date().toISOString(),
                    read: false
                };
                
                this.data.notifications.unshift(notification);
                if (this.data.notifications.length > 50) {
                    this.data.notifications = this.data.notifications.slice(0, 50);
                }
                this.saveData();
                return notification;
            }

            markNotificationRead(notificationId) {
                const notification = this.data.notifications.find(n => n.id === notificationId);
                if (notification) {
                    notification.read = true;
                    this.saveData();
                }
            }

            markAllNotificationsRead() {
                this.data.notifications.forEach(n => n.read = true);
                this.saveData();
            }

            // Activity System
            addActivity(activity) {
                const activityItem = {
                    id: Date.now(),
                    activity: activity,
                    timestamp: new Date().toISOString()
                };
                
                this.data.activities.unshift(activityItem);
                if (this.data.activities.length > 50) {
                    this.data.activities = this.data.activities.slice(0, 50);
                }
                this.saveData();
            }

            // Search System
            search(query) {
                const results = [];
                
                // Search posts
                this.data.posts.forEach(post => {
                    if (post.content.toLowerCase().includes(query.toLowerCase()) || 
                        post.author.toLowerCase().includes(query.toLowerCase())) {
                        results.push({
                            type: 'post',
                            id: post.id,
                            title: post.content.substring(0, 50) + '...',
                            subtitle: `by ${post.author}`,
                            data: post
                        });
                    }
                });

                // Search friends
                this.data.friends.forEach(friend => {
                    if (friend.name.toLowerCase().includes(query.toLowerCase()) || 
                        friend.username.toLowerCase().includes(query.toLowerCase())) {
                        results.push({
                            type: 'friend',
                            id: friend.id,
                            title: friend.name,
                            subtitle: `@${friend.username}`,
                            data: friend
                        });
                    }
                });

                return results;
            }

            // Trending System
            updateTrending(content) {
                const hashtags = content.match(/#\w+/g) || [];
                hashtags.forEach(tag => {
                    const existing = this.data.trending.find(t => t.tag === tag);
                    if (existing) {
                        existing.count++;
                    } else {
                        this.data.trending.push({ tag: tag, count: 1 });
                    }
                });
                
                // Sort by count
                this.data.trending.sort((a, b) => b.count - a.count);
                this.data.trending = this.data.trending.slice(0, 10);
            }

            // Friend System
            addFriend(friendData) {
                this.data.friends.push(friendData);
                this.data.user.stats.friends++;
                this.addActivity(`You became friends with ${friendData.name}`);
                this.addNotification('friend', `You are now friends with ${friendData.name}`, friendData.id);
                this.saveData();
            }

            // Data Management
            clearAllData() {
                localStorage.removeItem(this.storageKey);
                this.data = this.loadData();
                this.updateUI();
                this.showToast('üóëÔ∏è All data cleared successfully!');
            }

            // UI Updates
            updateUI() {
                this.updateStats();
                this.renderPosts();
                this.renderNotifications();
                this.renderActivities();
                this.renderOnlineFriends();
                this.renderTrending();
                this.renderStories();
            }

            updateStats() {
                document.getElementById('postsCount').textContent = this.data.user.stats.posts;
                document.getElementById('friendsCount').textContent = this.data.user.stats.friends;
                document.getElementById('likesCount').textContent = this.data.user.stats.likes;
            }

            renderPosts() {
                const container = document.getElementById('postsContainer');
                
                if (this.data.posts.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-12">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path>
                            </svg>
                            <h3 class="text-xl font-semibold mb-2">No posts yet</h3>
                            <p>Share your first post to get started!</p>
                            <p class="text-sm mt-2">Write something in the box above and click "Post"</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.posts.map(post => {
                    const timeAgo = this.getTimeAgo(new Date(post.timestamp));
                    const isLiked = post.likedBy.includes(this.data.user.id);
                    
                    return `
                        <div class="post-card rounded-xl">
                            <div class="p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center space-x-3">
                                        <img src="${post.authorAvatar}" alt="${post.author}" class="w-10 h-10 rounded-full">
                                        <div>
                                            <h4 class="font-semibold text-white">${post.author}</h4>
                                            <p class="text-gray-400 text-sm">${timeAgo}</p>
                                        </div>
                                    </div>
                                    <button class="text-gray-400 hover:text-gray-300" onclick="socialHub.showPostOptions(${post.id})">
                                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
                                        </svg>
                                    </button>
                                </div>
                                
                                <div class="mb-4">
                                    ${post.feeling ? `<span class="inline-block bg-indigo-600 text-white px-2 py-1 rounded-full text-xs mb-2">Feeling ${post.feeling}</span>` : ''}
                                    ${post.location ? `<span class="inline-block bg-green-600 text-white px-2 py-1 rounded-full text-xs mb-2 ml-2">üìç ${post.location}</span>` : ''}
                                    <p class="text-gray-300">${this.formatPostContent(post.content)}</p>
                                </div>
                                
                                ${post.image ? `<img src="${post.image}" alt="Post image" class="image-preview mb-4">` : ''}
                            </div>
                            
                            <div class="border-t border-gray-700 px-6 py-3">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="flex space-x-4 text-sm text-gray-400">
                                        <span>${post.likes} likes</span>
                                        <span>${post.comments.length} comments</span>
                                        <span>${post.shares} shares</span>
                                    </div>
                                </div>
                                
                                <div class="post-actions">
                                    <button class="like-btn ${isLiked ? 'liked' : ''}" onclick="socialHub.toggleLike(${post.id})">
                                        <svg class="w-5 h-5 mr-2" fill="${isLiked ? 'currentColor' : 'none'}" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                                        </svg>
                                        ${isLiked ? 'Liked' : 'Like'}
                                    </button>
                                    
                                    <button onclick="socialHub.toggleComments(${post.id})">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                                        </svg>
                                        Comment
                                    </button>
                                    
                                    <button onclick="socialHub.sharePost(${post.id})">
                                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path>
                                        </svg>
                                        Share
                                    </button>
                                </div>
                            </div>
                            
                            <div id="comments-${post.id}" class="comment-section">
                                <div class="space-y-3 mb-4">
                                    ${post.comments.map(comment => `
                                        <div class="comment-item">
                                            <div class="flex items-start space-x-3">
                                                <img src="${comment.authorAvatar}" alt="${comment.author}" class="w-6 h-6 rounded-full">
                                                <div class="flex-1">
                                                    <div class="flex items-center space-x-2">
                                                        <span class="font-medium text-white text-sm">${comment.author}</span>
                                                        <span class="text-xs text-gray-500">${this.getTimeAgo(new Date(comment.timestamp))}</span>
                                                    </div>
                                                    <p class="text-gray-300 text-sm mt-1">${comment.content}</p>
                                                </div>
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                                
                                <div class="flex items-center space-x-3">
                                    <img src="${this.data.user.avatar}" alt="You" class="w-6 h-6 rounded-full">
                                    <input type="text" placeholder="Write a comment..." class="flex-1 bg-gray-800 border border-gray-700 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white placeholder-gray-400" onkeypress="socialHub.handleCommentSubmit(event, ${post.id})">
                                    <button onclick="socialHub.submitComment(${post.id})" class="bg-indigo-600 text-white px-4 py-2 rounded-full text-sm hover:bg-indigo-700 transition-colors">
                                        Post
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderNotifications() {
                const container = document.getElementById('notificationsList');
                const unreadCount = this.data.notifications.filter(n => !n.read).length;
                
                // Update notification badge
                const badge = document.getElementById('notificationCount');
                if (unreadCount > 0) {
                    badge.textContent = unreadCount;
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }

                if (this.data.notifications.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-8">
                            <svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM9 7H4l5-5v5zm6 10V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2z"></path>
                            </svg>
                            <p>No notifications yet</p>
                            <p class="text-sm">We'll notify you when something happens!</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.notifications.map(notif => `
                    <div class="notification-item flex items-center space-x-3 p-3 rounded-lg cursor-pointer ${notif.read ? 'opacity-60' : ''}" onclick="socialHub.markNotificationRead(${notif.id})">
                        <div class="w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center">
                            ${this.getNotificationIcon(notif.type)}
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-300">${notif.message}</p>
                            <p class="text-xs text-gray-500">${this.getTimeAgo(new Date(notif.timestamp))}</p>
                        </div>
                        ${!notif.read ? '<div class="w-2 h-2 bg-indigo-500 rounded-full"></div>' : ''}
                    </div>
                `).join('');
            }

            renderActivities() {
                const container = document.getElementById('activityFeed');
                
                if (this.data.activities.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-4">
                            <svg class="w-8 h-8 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                            <p class="text-sm">No recent activity</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = this.data.activities.slice(0, 10).map(activity => `
                    <div class="flex items-center space-x-3 text-sm">
                        <div class="w-2 h-2 bg-indigo-500 rounded-full"></div>
                        <div class="flex-1">
                            <p class="text-gray-300">${activity.activity}</p>
                            <p class="text-xs text-gray-500">${this.getTimeAgo(new Date(activity.timestamp))}</p>
                        </div>
                    </div>
                `).join('');
            }

            renderOnlineFriends() {
                const container = document.getElementById('onlineFriends');
                
                // Show ALL friends with their real status, not just online ones
                const allFriends = this.data.friends.sort((a, b) => {
                    // Sort by status priority: online > away > offline
                    const statusPriority = { online: 3, away: 2, offline: 1 };
                    return statusPriority[b.status] - statusPriority[a.status];
                });
                
                if (allFriends.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-gray-500 py-4">
                            <svg class="w-8 h-8 mx-auto mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                            <p class="text-sm">No friends yet</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = allFriends.map(friend => {
                    let statusIndicator = '';
                    let statusText = '';
                    let statusColor = '';
                    let indicatorColor = '';
                    
                    switch (friend.status) {
                        case 'online':
                            statusIndicator = 'online-indicator';
                            statusText = 'Online';
                            statusColor = 'text-green-400';
                            indicatorColor = 'bg-green-500';
                            break;
                        case 'away':
                            statusIndicator = 'away-indicator';
                            statusText = 'Away';
                            statusColor = 'text-yellow-400';
                            indicatorColor = 'bg-yellow-500';
                            break;
                        case 'offline':
                            statusIndicator = 'offline-indicator';
                            const lastSeen = new Date(friend.lastSeen);
                            statusText = `Last seen ${this.getTimeAgo(lastSeen)}`;
                            statusColor = 'text-gray-500';
                            indicatorColor = 'bg-gray-500';
                            break;
                    }
                    
                    return `
                        <div class="friend-item flex items-center space-x-3 p-2 rounded-lg ${friend.status === 'offline' ? 'opacity-60' : ''}" onclick="socialHub.openChat('${friend.id}')">
                            <div class="relative">
                                <img src="${friend.avatar}" alt="${friend.name}" class="w-8 h-8 rounded-full">
                                <div class="${statusIndicator} absolute -bottom-1 -right-1 w-3 h-3 rounded-full ${indicatorColor} border-2 border-gray-900"></div>
                            </div>
                            <div class="flex-1">
                                <p class="text-sm font-medium text-white">${friend.name}</p>
                                <p class="text-xs ${statusColor}">${statusText}</p>
                            </div>
                            ${friend.status === 'online' ? '<div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>' : ''}
                        </div>
                    `;
                }).join('');

                // Update the sidebar title to show authentic status
                const offlineCount = allFriends.filter(f => f.status === 'offline').length;
                
                const titleElement = container.parentElement.querySelector('h4');
                if (titleElement) {
                    titleElement.innerHTML = `Friends <span class="text-sm font-normal text-gray-400">(${offlineCount} offline)</span>`;
                }
            }

            renderTrending() {
                const container = document.getElementById('trendingTopics');
                
                container.innerHTML = this.data.trending.map(trend => `
                    <div class="flex items-center justify-between cursor-pointer hover:bg-gray-800 p-2 rounded-lg transition-colors" onclick="socialHub.searchTrending('${trend.tag}')">
                        <span class="text-sm text-gray-300">${trend.tag}</span>
                        <span class="text-xs text-gray-500">${trend.count} post${trend.count !== 1 ? 's' : ''}</span>
                    </div>
                `).join('');
            }

            renderStories() {
                const container = document.getElementById('storiesContainer');
                const addStoryBtn = container.querySelector('.story-item');
                
                // Clear existing stories except add button
                container.innerHTML = '';
                container.appendChild(addStoryBtn);
                
                this.data.stories.forEach(story => {
                    const storyElement = document.createElement('div');
                    storyElement.className = 'flex-shrink-0 text-center cursor-pointer story-item';
                    storyElement.onclick = () => this.viewStory(story.id);
                    
                    storyElement.innerHTML = `
                        <div class="story-ring rounded-full">
                            <div class="w-16 h-16 rounded-full overflow-hidden">
                                ${story.image ? 
                                    `<img src="${story.image}" alt="Story" class="w-full h-full object-cover">` :
                                    `<div class="w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center">
                                        <span class="text-white text-xs font-bold">${story.author.charAt(0)}</span>
                                    </div>`
                                }
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">${story.author}</p>
                    `;
                    
                    container.appendChild(storyElement);
                });
            }

            // Chat System
            openChat(friendId) {
                const friend = this.data.friends.find(f => f.id === friendId);
                if (!friend) return;

                this.currentChat = friendId;
                document.getElementById('chatName').textContent = friend.name;
                document.getElementById('chatAvatar').src = friend.avatar;
                
                this.renderChatMessages(friendId);
                document.getElementById('chatModal').classList.add('active');
            }

            renderChatMessages(friendId) {
                const container = document.getElementById('chatMessages');
                const messages = this.getConversation(friendId);
                
                container.innerHTML = messages.map(message => {
                    const isSent = message.senderId === this.data.user.id;
                    let statusIcon = '';
                    
                    if (isSent) {
                        if (message.seen) {
                            statusIcon = '<span class="text-blue-400 text-xs ml-1">‚úì‚úì</span>';
                        } else if (message.delivered) {
                            statusIcon = '<span class="text-gray-400 text-xs ml-1">‚úì‚úì</span>';
                        } else {
                            statusIcon = '<span class="text-gray-500 text-xs ml-1">‚úì</span>';
                        }
                    }
                    
                    return `
                        <div class="flex ${isSent ? 'justify-end' : 'justify-start'}">
                            <div class="message-bubble p-3 rounded-lg ${isSent ? 'message-sent' : 'message-received'}">
                                <p class="text-sm text-white">${message.content}</p>
                                <div class="flex items-center justify-between mt-1">
                                    <p class="text-xs text-gray-300">${this.getTimeAgo(new Date(message.timestamp))}</p>
                                    ${statusIcon}
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                container.scrollTop = container.scrollHeight;
            }

            sendChatMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (message && this.currentChat) {
                    this.sendMessage(this.currentChat, message);
                    input.value = '';
                    this.renderChatMessages(this.currentChat);
                    this.showTypingIndicator();
                }
            }

            showTypingIndicator() {
                const indicator = document.querySelector('.typing-indicator');
                indicator.classList.add('active');
                setTimeout(() => {
                    indicator.classList.remove('active');
                }, 3000);
            }

            showFriendTyping(friend) {
                if (this.currentChat === friend.id) {
                    const indicator = document.querySelector('.typing-indicator');
                    const typingText = indicator.querySelector('span');
                    typingText.textContent = `${friend.name} is typing...`;
                    indicator.classList.add('active');
                    
                    setTimeout(() => {
                        indicator.classList.remove('active');
                    }, 3000 + Math.random() * 2000);
                }
            }

            updateFriendStatusInChat() {
                if (this.currentChat) {
                    const friend = this.data.friends.find(f => f.id === this.currentChat);
                    if (friend) {
                        const statusElement = document.querySelector('#chatModal .text-xs.text-gray-400');
                        if (statusElement) {
                            let statusText = '';
                            let statusColor = '';
                            
                            switch (friend.status) {
                                case 'online':
                                    statusText = 'Online';
                                    statusColor = 'text-green-400';
                                    break;
                                case 'away':
                                    statusText = 'Away';
                                    statusColor = 'text-yellow-400';
                                    break;
                                case 'offline':
                                    const lastSeen = new Date(friend.lastSeen);
                                    statusText = `Last seen ${this.getTimeAgo(lastSeen)}`;
                                    statusColor = 'text-gray-500';
                                    break;
                            }
                            
                            statusElement.textContent = statusText;
                            statusElement.className = `text-xs ${statusColor}`;
                        }
                    }
                }
            }

            // Utility Functions
            formatPostContent(content) {
                // Convert hashtags to clickable links
                return content.replace(/#(\w+)/g, '<span class="text-indigo-400 cursor-pointer" onclick="socialHub.searchTrending(\'#$1\')">#$1</span>');
            }

            getNotificationIcon(type) {
                const icons = {
                    like: '<svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>',
                    comment: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>',
                    message: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>',
                    friend: '<svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>'
                };
                return icons[type] || icons.like;
            }

            getTimeAgo(date) {
                const now = new Date();
                const diff = now - date;
                const minutes = Math.floor(diff / 60000);
                const hours = Math.floor(diff / 3600000);
                const days = Math.floor(diff / 86400000);

                if (minutes < 1) return 'Just now';
                if (minutes < 60) return `${minutes}m ago`;
                if (hours < 24) return `${hours}h ago`;
                if (days < 7) return `${days}d ago`;
                return date.toLocaleDateString();
            }

            animateStatsUpdate(elementId) {
                const element = document.getElementById(elementId);
                element.classList.add('updated');
                setTimeout(() => {
                    element.classList.remove('updated');
                }, 500);
            }

            showToast(message) {
                const toast = document.createElement('div');
                toast.className = 'toast';
                toast.textContent = message;
                document.body.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 100);
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => document.body.removeChild(toast), 300);
                }, 3000);
            }

            // Event Handlers
            createPost() {
                const input = document.getElementById('postInput');
                const content = input.value.trim();
                const imagePreview = document.getElementById('imagePreview');
                const previewImg = document.getElementById('previewImg');
                
                if (!content && !previewImg.src) {
                    this.showToast('‚ö†Ô∏è Please write something or add an image!');
                    return;
                }

                const image = previewImg.src && !previewImg.src.includes('data:image/svg+xml') ? previewImg.src : null;
                const post = this.addPost(content, image);
                
                // Clear form
                input.value = '';
                imagePreview.classList.add('hidden');
                previewImg.src = '';
                
                this.showToast('‚úÖ Post created successfully!');
                this.animateStatsUpdate('postsCount');
                
                // Clear draft
                localStorage.removeItem('post_draft');
            }

            toggleComments(postId) {
                const commentsSection = document.getElementById(`comments-${postId}`);
                commentsSection.classList.toggle('active');
            }

            handleCommentSubmit(event, postId) {
                if (event.key === 'Enter') {
                    this.submitComment(postId);
                }
            }

            submitComment(postId) {
                const input = event.target.previousElementSibling || document.querySelector(`#comments-${postId} input`);
                const comment = input.value.trim();
                
                if (comment) {
                    this.addComment(postId, comment);
                    input.value = '';
                    this.showToast('üí¨ Comment added!');
                }
            }

            showPostOptions(postId) {
                this.showToast('‚öôÔ∏è Post options: Edit, Delete, Report');
            }

            searchTrending(tag) {
                const searchInput = document.getElementById('searchInput');
                searchInput.value = tag;
                this.performSearch(tag);
                this.showToast(`üîç Searching for ${tag}...`);
            }

            performSearch(query) {
                if (!query.trim()) return;
                
                const results = this.search(query);
                const container = document.getElementById('searchResults');
                
                if (results.length === 0) {
                    container.innerHTML = '<div class="search-item">No results found</div>';
                } else {
                    container.innerHTML = results.map(result => `
                        <div class="search-item" onclick="socialHub.selectSearchResult('${result.type}', '${result.id}')">
                            <div class="font-medium text-white">${result.title}</div>
                            <div class="text-sm text-gray-400">${result.subtitle}</div>
                        </div>
                    `).join('');
                }
                
                container.classList.add('active');
            }

            selectSearchResult(type, id) {
                if (type === 'friend') {
                    this.openChat(id);
                } else if (type === 'post') {
                    // Scroll to post
                    this.showToast('üìç Found post!');
                }
                
                document.getElementById('searchResults').classList.remove('active');
                document.getElementById('searchInput').value = '';
            }

            viewStory(storyId) {
                const story = this.data.stories.find(s => s.id === storyId);
                if (story) {
                    story.views++;
                    if (!story.viewedBy.includes(this.data.user.id)) {
                        story.viewedBy.push(this.data.user.id);
                    }
                    this.saveData();
                    this.showToast(`üëÄ Viewing ${story.author}'s story`);
                }
            }

            openStoryModal() {
                document.getElementById('storyModal').classList.add('active');
            }

            createStory() {
                const textInput = document.getElementById('storyText');
                const content = textInput.value.trim();
                
                if (!content) {
                    this.showToast('‚ö†Ô∏è Please write something for your story!');
                    return;
                }

                this.addStory(content);
                textInput.value = '';
                document.getElementById('storyModal').classList.remove('active');
                this.showToast('üì∏ Story shared successfully!');
            }

            // No fake friend simulation needed

            startRealTimeUpdates() {
                // No fake activities - only real user actions will generate activity
            }

            // Event Listeners Setup
            setupEventListeners() {
                // Post creation
                document.getElementById('createPostBtn').addEventListener('click', () => this.createPost());
                document.getElementById('postInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && e.ctrlKey) {
                        this.createPost();
                    }
                });

                // Image upload
                document.getElementById('imageInput').addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            document.getElementById('previewImg').src = e.target.result;
                            document.getElementById('imagePreview').classList.remove('hidden');
                        };
                        reader.readAsDataURL(file);
                    }
                });

                document.getElementById('removeImage').addEventListener('click', function() {
                    document.getElementById('previewImg').src = '';
                    document.getElementById('imagePreview').classList.add('hidden');
                    document.getElementById('imageInput').value = '';
                });

                // Modal controls
                document.getElementById('messagesBtn').addEventListener('click', () => {
                    document.getElementById('messagesModal').classList.add('active');
                });

                document.getElementById('notificationsBtn').addEventListener('click', () => {
                    document.getElementById('notificationsModal').classList.add('active');
                });

                document.getElementById('closeMessages').addEventListener('click', () => {
                    document.getElementById('messagesModal').classList.remove('active');
                });

                document.getElementById('closeNotifications').addEventListener('click', () => {
                    document.getElementById('notificationsModal').classList.remove('active');
                });

                document.getElementById('closeChat').addEventListener('click', () => {
                    document.getElementById('chatModal').classList.remove('active');
                    this.currentChat = null;
                });

                document.getElementById('closeStory').addEventListener('click', () => {
                    document.getElementById('storyModal').classList.remove('active');
                });

                // Chat functionality
                document.getElementById('sendMessage').addEventListener('click', () => this.sendChatMessage());
                document.getElementById('chatInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendChatMessage();
                    }
                });

                // Story creation
                document.getElementById('createStoryBtn').addEventListener('click', () => this.createStory());

                // Notifications
                document.getElementById('markAllRead').addEventListener('click', () => {
                    this.markAllNotificationsRead();
                    this.showToast('‚úÖ All notifications marked as read');
                });

                // Profile dropdown
                document.getElementById('profileDropdown').addEventListener('click', () => {
                    document.getElementById('profileDropdownMenu').classList.toggle('active');
                });

                // Search functionality
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    clearTimeout(this.searchTimeout);
                    const query = e.target.value.trim();
                    
                    if (query.length > 2) {
                        this.searchTimeout = setTimeout(() => {
                            this.performSearch(query);
                        }, 300);
                    } else {
                        document.getElementById('searchResults').classList.remove('active');
                    }
                });

                // Quick actions
                document.getElementById('findFriendsBtn').addEventListener('click', () => {
                    this.showToast('üîç Friend finder: Search for people you know!');
                });

                document.getElementById('createGroupBtn').addEventListener('click', () => {
                    this.showToast('üë• Group creation: Create groups with friends!');
                });

                document.getElementById('eventsBtn').addEventListener('click', () => {
                    this.showToast('üìÖ Events: Create and join events!');
                });

                document.getElementById('clearDataBtn').addEventListener('click', () => {
                    if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                        this.clearAllData();
                    }
                });

                // Feeling and location buttons
                document.getElementById('feelingBtn').addEventListener('click', () => {
                    const feelings = ['happy', 'excited', 'grateful', 'motivated', 'relaxed', 'creative', 'blessed', 'amazing'];
                    const randomFeeling = feelings[Math.floor(Math.random() * feelings.length)];
                    const input = document.getElementById('postInput');
                    input.value += ` feeling ${randomFeeling} `;
                    input.focus();
                });

                document.getElementById('locationBtn').addEventListener('click', () => {
                    const locations = ['at home', 'at work', 'at the gym', 'at the park', 'downtown', 'at the beach', 'at the coffee shop', 'traveling'];
                    const randomLocation = locations[Math.floor(Math.random() * locations.length)];
                    const input = document.getElementById('postInput');
                    input.value += ` ${randomLocation} `;
                    input.focus();
                });

                // Close dropdowns when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('#profileDropdown')) {
                        document.getElementById('profileDropdownMenu').classList.remove('active');
                    }
                    if (!e.target.closest('#searchInput')) {
                        document.getElementById('searchResults').classList.remove('active');
                    }
                });

                // Close modals when clicking outside
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.classList.remove('active');
                        }
                    });
                });

                // Auto-save posts as user types
                let draftTimeout;
                document.getElementById('postInput').addEventListener('input', function() {
                    clearTimeout(draftTimeout);
                    draftTimeout = setTimeout(() => {
                        const content = this.value.trim();
                        if (content) {
                            localStorage.setItem('post_draft', content);
                        } else {
                            localStorage.removeItem('post_draft');
                        }
                    }, 1000);
                });

                // Load draft on page load
                const draft = localStorage.getItem('post_draft');
                if (draft) {
                    document.getElementById('postInput').value = draft;
                    this.showToast('üìù Draft restored!');
                }

                // Emoji picker
                document.getElementById('emojiBtn').addEventListener('click', () => {
                    document.getElementById('emojiPicker').classList.toggle('active');
                });

                document.querySelectorAll('.emoji').forEach(emoji => {
                    emoji.addEventListener('click', () => {
                        const input = document.getElementById('chatInput');
                        input.value += emoji.textContent + ' ';
                        input.focus();
                        document.getElementById('emojiPicker').classList.remove('active');
                    });
                });
            }
        }

        // Global functions for onclick handlers
        window.socialHub = new FullySocialHub();

        // Profile functions
        window.editProfile = () => {
            const newName = prompt('Enter your new name:', window.socialHub.data.user.name);
            if (newName && newName.trim() && newName.trim() !== window.socialHub.data.user.name) {
                const oldName = window.socialHub.data.user.name;
                window.socialHub.data.user.name = newName.trim();
                
                // Update all posts by this user
                window.socialHub.data.posts.forEach(post => {
                    if (post.authorId === window.socialHub.data.user.id) {
                        post.author = newName.trim();
                    }
                });
                
                // Update all comments by this user
                window.socialHub.data.posts.forEach(post => {
                    post.comments.forEach(comment => {
                        if (comment.authorId === window.socialHub.data.user.id) {
                            comment.author = newName.trim();
                        }
                    });
                });
                
                // Update all stories by this user
                window.socialHub.data.stories.forEach(story => {
                    if (story.authorId === window.socialHub.data.user.id) {
                        story.author = newName.trim();
                    }
                });
                
                // Update UI elements
                document.getElementById('userName').textContent = newName.trim();
                document.getElementById('profileName').textContent = newName.trim();
                
                window.socialHub.addActivity(`You changed your name from ${oldName} to ${newName.trim()}`);
                window.socialHub.saveData();
                window.socialHub.showToast(`‚úÖ Profile updated! You are now ${newName.trim()}`);
            } else if (newName !== null) {
                window.socialHub.showToast('‚ö†Ô∏è Please enter a valid name!');
            }
        };
        window.changeStatus = () => {
            const statuses = ['online', 'away', 'offline'];
            const currentStatus = window.socialHub.data.user.status || 'online';
            const currentIndex = statuses.indexOf(currentStatus);
            const nextStatus = statuses[(currentIndex + 1) % statuses.length];
            
            window.socialHub.data.user.status = nextStatus;
            window.socialHub.saveData();
            
            // Update UI
            const statusElement = document.querySelector('.user-status');
            statusElement.className = `user-status status-${nextStatus}`;
            statusElement.textContent = nextStatus.charAt(0).toUpperCase() + nextStatus.slice(1);
            
            window.socialHub.showToast(`üîÑ Status changed to ${nextStatus}!`);
            window.socialHub.addActivity(`You changed your status to ${nextStatus}`);
        };
        window.viewSettings = () => window.socialHub.showToast('‚öôÔ∏è Settings panel coming soon!');
        window.logout = () => window.socialHub.showToast('üëã Logout functionality coming soon!');
        window.openStoryModal = () => window.socialHub.openStoryModal();
    </script>
</html>
